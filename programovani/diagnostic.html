<!doctype html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üì± Mobiln√≠ Diagnostika</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, sans-serif;
            padding: 20px;
            background: #0a0a0b;
            color: #fff;
            line-height: 1.6;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        h1 {
            color: #00d4aa;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .section {
            background: #1a1a1b;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            border-left: 4px solid #00d4aa;
        }

        .section h2 {
            font-size: 18px;
            margin-bottom: 10px;
            color: #00d4aa;
        }

        .info-item {
            padding: 8px 0;
            border-bottom: 1px solid #333;
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .label {
            color: #888;
            font-size: 14px;
        }

        .value {
            color: #fff;
            font-weight: 500;
            font-size: 16px;
        }

        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            margin-top: 5px;
        }

        .status.ok {
            background: #10b981;
            color: white;
        }

        .status.warning {
            background: #f59e0b;
            color: white;
        }

        .status.error {
            background: #ef4444;
            color: white;
        }

        button {
            background: #00d4aa;
            color: #0a0a0b;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }

        button:active {
            transform: scale(0.98);
        }

        .css-test {
            width: 100px;
            height: 100px;
            background: #ef4444;
            margin: 10px 0;
            border-radius: 8px;
        }

        @media (max-width: 768px) {
            .css-test {
                background: #10b981;
            }
        }

        code {
            background: #000;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üì± Diagnostika mobiln√≠ho zobrazen√≠</h1>

        <div class="section">
            <h2>üñ•Ô∏è Informace o za≈ô√≠zen√≠</h2>
            <div class="info-item">
                <div class="label">≈†√≠≈ôka okna:</div>
                <div class="value" id="width">-</div>
            </div>
            <div class="info-item">
                <div class="label">V√Ω≈°ka okna:</div>
                <div class="value" id="height">-</div>
            </div>
            <div class="info-item">
                <div class="label">PomƒõrPixelRatio:</div>
                <div class="value" id="pixelRatio">-</div>
            </div>
            <div class="info-item">
                <div class="label">Orientace:</div>
                <div class="value" id="orientation">-</div>
            </div>
            <div class="info-item">
                <div class="label">Touch podpora:</div>
                <div class="value" id="touch">-</div>
            </div>
        </div>

        <div class="section">
            <h2>üåê Prohl√≠≈æeƒç</h2>
            <div class="info-item">
                <div class="label">User Agent:</div>
                <div class="value" id="userAgent" style="font-size: 12px; word-break: break-all;">-</div>
            </div>
            <div class="info-item">
                <div class="label">Detekce mobiln√≠ho za≈ô√≠zen√≠:</div>
                <div class="value" id="isMobile">-</div>
            </div>
        </div>

        <div class="section">
            <h2>üé® CSS Media Query Test</h2>
            <div class="info-item">
                <div class="label">Test @media (max-width: 768px):</div>
                <div class="css-test"></div>
                <div class="value" id="cssTest">-</div>
                <div style="margin-top: 10px; font-size: 14px; color: #888;">
                    Pokud je ƒçtverec <strong style="color: #10b981;">ZELEN√ù</strong>, CSS media queries funguj√≠ ‚úÖ<br>
                    Pokud je ƒçtverec <strong style="color: #ef4444;">ƒåERVEN√ù</strong>, CSS media queries nefunguj√≠ ‚ùå
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üíæ LocalStorage</h2>
            <div class="info-item">
                <div class="label">LocalStorage dostupn√Ω:</div>
                <div class="value" id="localStorage">-</div>
            </div>
            <div class="info-item">
                <div class="label">Poƒçet ulo≈æen√Ωch polo≈æek:</div>
                <div class="value" id="localStorageCount">-</div>
            </div>
            <div class="info-item">
                <div class="label">Verze aplikace:</div>
                <div class="value" id="appVersion">-</div>
            </div>
        </div>

        <div class="section">
            <h2>üîß Akce</h2>
            <button onclick="clearCache()">üóëÔ∏è Vymazat pouze Browser Cache</button>
            <button onclick="hardReload()">üîÑ Hard Reload (Ctrl+Shift+R)</button>
            <button onclick="showCSSFiles()">üìÑ Zobrazit naƒçten√© CSS soubory</button>
            <button onclick="goToMain()">‚û°Ô∏è P≈ôej√≠t na hlavn√≠ aplikaci</button>
        </div>

        <div class="section" id="cssFiles" style="display: none;">
            <h2>üìÑ Naƒçten√© CSS soubory</h2>
            <div id="cssFilesList"></div>
        </div>
    </div>

    <script>
        // Naƒç√≠st informace
        function loadInfo() {
            document.getElementById('width').textContent = window.innerWidth + 'px';
            document.getElementById('height').textContent = window.innerHeight + 'px';
            document.getElementById('pixelRatio').textContent = window.devicePixelRatio;
            document.getElementById('orientation').textContent = window.innerWidth > window.innerHeight ? 'Landscape (na ≈°√≠≈ôku)' : 'Portrait (na v√Ω≈°ku)';

            const hasTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            document.getElementById('touch').innerHTML = hasTouch ?
                '<span class="status ok">‚úÖ Ano</span>' :
                '<span class="status error">‚ùå Ne</span>';

            document.getElementById('userAgent').textContent = navigator.userAgent;

            const isMobile = window.innerWidth <= 768;
            document.getElementById('isMobile').innerHTML = isMobile ?
                '<span class="status ok">‚úÖ Mobiln√≠ za≈ô√≠zen√≠ (‚â§768px)</span>' :
                '<span class="status warning">‚ö†Ô∏è Desktop (>768px)</span>';

            // CSS test
            const cssTest = document.querySelector('.css-test');
            const bgColor = window.getComputedStyle(cssTest).backgroundColor;
            const isGreen = bgColor.includes('16, 185, 129') || bgColor.includes('10b981');
            document.getElementById('cssTest').innerHTML = isGreen ?
                '<span class="status ok">‚úÖ Media queries funguj√≠</span>' :
                '<span class="status error">‚ùå Media queries nefunguj√≠</span>';

            // LocalStorage
            try {
                const test = 'test';
                localStorage.setItem(test, test);
                localStorage.removeItem(test);
                document.getElementById('localStorage').innerHTML = '<span class="status ok">‚úÖ Dostupn√Ω</span>';

                const count = Object.keys(localStorage).length;
                document.getElementById('localStorageCount').textContent = count + ' polo≈æek';

                const version = localStorage.getItem('app_version') || 'Nezn√°m√°';
                document.getElementById('appVersion').textContent = version;
            } catch (e) {
                document.getElementById('localStorage').innerHTML = '<span class="status error">‚ùå Nedostupn√Ω</span>';
                document.getElementById('localStorageCount').textContent = 'N/A';
                document.getElementById('appVersion').textContent = 'N/A';
            }
        }

        function clearCache() {
            if ('caches' in window) {
                caches.keys().then(names => {
                    names.forEach(name => caches.delete(name));
                    alert('‚úÖ Browser cache vymaz√°na!\n\nPozn√°mka: localStorage NEBYLA smaz√°na (va≈°e data jsou zachov√°na)');
                });
            } else {
                alert('‚ö†Ô∏è Cache API nen√≠ dostupn√° v tomto prohl√≠≈æeƒçi');
            }
        }

        function hardReload() {
            location.reload(true);
        }

        function showCSSFiles() {
            const section = document.getElementById('cssFiles');
            const list = document.getElementById('cssFilesList');

            section.style.display = 'block';
            list.innerHTML = '';

            const links = document.querySelectorAll('link[rel="stylesheet"]');
            links.forEach(link => {
                const div = document.createElement('div');
                div.className = 'info-item';
                div.innerHTML = `
                    <div class="label">CSS soubor:</div>
                    <div class="value" style="font-size: 12px; word-break: break-all;">
                        ${link.href}
                    </div>
                `;
                list.appendChild(div);
            });

            if (links.length === 0) {
                list.innerHTML = '<div class="info-item"><div class="value" style="color: #ef4444;">‚ùå ≈Ω√°dn√© CSS soubory nenalezeny!</div></div>';
            }
        }

        function goToMain() {
            window.location.href = 'index.html?v=' + Date.now();
        }

        // Naƒç√≠st info p≈ôi naƒçten√≠ str√°nky
        loadInfo();

        // Aktualizovat p≈ôi zmƒõnƒõ velikosti okna
        window.addEventListener('resize', loadInfo);
        window.addEventListener('orientationchange', () => {
            setTimeout(loadInfo, 100);
        });
    </script>
</body>
</html>
