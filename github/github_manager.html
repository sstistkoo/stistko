<!doctype html>
<html lang="cs">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="LokÃ¡lnÃ­ sprÃ¡vce GitHub repozitÃ¡Å™Å¯ pÅ™es Personal Access Token."
    />
    <link
      rel="icon"
      data-uri="data:image/svg+xml,"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='8' fill='%230e0f11'/%3E%3Ctext x='16' y='22' text-anchor='middle' font-size='20'%3EğŸ“%3C/text%3E%3C/svg%3E"
    />
    <title>GitHub Manager</title>
    <link rel="stylesheet" href="css/styles.css">
  </head>
  <body>
    <!-- TOPBAR -->
    <div class="topbar">
      <div class="logo">GitHub<span>Manager</span></div>
      <div class="sep"></div>
      <div class="status-dot" id="statusDot"></div>
      <div class="status-label" id="statusLabel">NepÅ™ihlÃ¡Å¡en</div>
      <div style="margin-left: auto; display: flex; gap: 10px; align-items: center;" id="logoutArea">
        <button
          class="btn-icon"
          id="searchBtn"
          title="Prohledat GitHub"
          style="display: none; font-size: 16px;"
        >
          ğŸ”
        </button>
        <button
          class="btn-cancel"
          id="logoutBtn"
          style="display: none; padding: 6px 14px; font-size: 12px"
        >
          Logout
        </button>
      </div>
    </div>

    <!-- MOBILE TABS -->
    <div class="mobile-tabs" id="mobileTabs" style="display: none">
      <button class="mobile-tab-btn" id="mobileTabSidebar" onclick="setMobilePanel('sidebar')">
        ğŸ“ RepozitÃ¡Å™e <span class="tab-badge" id="mobileRepoBadge"></span>
      </button>
      <button class="mobile-tab-btn active" id="mobileTabMain" onclick="setMobilePanel('main')">
        ğŸ“„ Obsah
      </button>
    </div>

    <!-- LAYOUT -->
    <div class="layout">
      <!-- SIDEBAR -->
      <div class="sidebar" id="sidebar" style="display: none">
        <div class="sidebar-head">
          <div class="label">RepozitÃ¡Å™e</div>
          <div style="display: flex; gap: 6px">
            <button
              class="btn-icon"
              id="backupBtn"
              title="StÃ¡hnut vÅ¡echny repo jako ZIP"
              style="color: var(--yellow); font-size: 15px"
            >
              ğŸ’¾
            </button>
            <button class="btn-icon" id="newRepoBtn" title="NovÃ½ repozitÃ¡Å™">
              +
            </button>
          </div>
        </div>
        <div class="repo-list" id="repoList">
          <div class="empty-state" style="padding: 40px 10px">
            <div class="big">ğŸ“­</div>
            <p>Å½Ã¡dnÃ© repo</p>
          </div>
        </div>
      </div>

      <!-- MAIN -->
      <div class="main" id="mainPanel">
        <!-- LOGIN PANEL -->
        <div class="login-panel" id="loginPanel">
          <div class="login-box">
            <h2>PÅ™ihlÃ¡Å¡enÃ­ pÅ™es GitHub Token</h2>
            <p>
              ZadÃ¡Å¡ tvÃ³j personal access token a mÃ¡Å¡ plnÃ½ pÅ™Ã­stup ke vÅ¡em
              repozitÃ¡Å™Å¯m â€“ ÄÃ­st i pisat.
            </p>
            <label>GitHub Personal Access Token</label>
            <input
              type="password"
              id="tokenInput"
              placeholder="ghp_xxxxxxxxxxxxxxxxx"
              autocomplete="off"
            />
            <button class="btn-primary" id="loginBtn">PÅ™ihlÃ¡sit se</button>
            <div class="hint">
              NemÃ¡Å¡ token? VytvoÅ™ si ho
              <a href="https://github.com/settings/tokens/new" target="_blank"
                >tady na GitHubu â†’</a
              ><br />
              PotÅ™ebuÅ¡ permissions: <strong>repo</strong> (full),
              <strong>user:read</strong>
            </div>
          </div>
        </div>

        <!-- CONTENT (po pÅ™ihlÃ¡Å¡enÃ­) -->
        <div class="content" id="mainContent" style="display: none">
          <div class="breadcrumb" id="breadcrumb">
            <span>ğŸ  Home</span>
          </div>
          <div
            id="fileToolbar"
            style="
              display: none;
              padding: 12px;
              background: var(--surface);
              border-bottom: 1px solid var(--border);
              display: flex;
              gap: 8px;
              align-items: center;
              flex-wrap: wrap;
            "
          >
            <input
              type="text"
              id="fileFilterInput"
              placeholder="ğŸ” Filtrovat soubory..."
              style="
                flex: 1;
                min-width: 200px;
                padding: 8px 12px;
                background: var(--bg);
                border: 1px solid var(--border);
                border-radius: 6px;
                color: var(--text);
                font-size: 12px;
                font-family: var(--font-mono);
              "
            />
            <select
              id="fileSortSelect"
              style="
                padding: 8px 12px;
                background: var(--bg);
                border: 1px solid var(--border);
                border-radius: 6px;
                color: var(--text);
                font-size: 12px;
                font-family: var(--font-mono);
              "
            >
              <option value="name-asc">ğŸ“ JmÃ©no (A-Z)</option>
              <option value="name-desc">ğŸ“ JmÃ©no (Z-A)</option>
              <option value="size-asc">ğŸ“ Velikost (â†‘)</option>
              <option value="size-desc">ğŸ“ Velikost (â†“)</option>
              <option value="type-asc">ğŸ“‹ Typ (A-Z)</option>
            </select>
            <button
              class="btn-icon"
              id="newFileBtn"
              title="VytvoÅ™it novÃ½ soubor/sloÅ¾ku"
              style="
                padding: 8px 16px;
                background: var(--accent);
                color: var(--bg);
                font-weight: 600;
              "
            >
              â• NovÃ½ soubor/sloÅ¾ka
            </button>
            </button>
          </div>
          <div id="repoView"></div>
        </div>
      </div>
    </div>

    <!-- NEW REPO MODAL -->
    <div class="modal-overlay" id="newRepoModal" style="display: none">
      <div class="modal">
        <h3>âœ¨ NovÃ½ RepozitÃ¡Å™</h3>
        <label>NÃ¡zev repozitÃ¡Å™e</label>
        <input type="text" id="newRepoName" placeholder="moj-projekt" />
        <label>Popis (volitelnÃ©)</label>
        <textarea
          id="newRepoDesc"
          placeholder="KrÃ¡tkÃ½ popis projektu..."
        ></textarea>
        <label>Viditelnost</label>
        <select id="newRepoVisibility">
          <option value="false">ğŸŒ Public â€“ viditelnÃ½ pro vÅ¡echny</option>
          <option value="true">ğŸ”’ Private â€“ viditelnÃ½ jen pro tebe</option>
        </select>
        <label>
          <input
            type="checkbox"
            id="newRepoReadme"
            style="margin-right: 6px; accent-color: var(--accent)"
            checked
          />
          PÅ™idej README.md (tak repo ne bude prÃ¡zdnÃ©)
        </label>
        <div class="modal-btns">
          <button class="btn-cancel" id="cancelNewRepo">ZruÅ¡it</button>
          <button class="btn-confirm" id="confirmNewRepo">VytvoÅ™it</button>
        </div>
      </div>
    </div>

    <!-- DELETE REPO MODAL -->
    <div class="modal-overlay" id="deleteRepoModal" style="display: none">
      <div class="modal">
        <h3 style="color: var(--red)">ğŸ—‘ï¸ Smazat repozitÃ¡Å™</h3>
        <p style="color: var(--text-dim); font-size: 12px; margin-bottom: 4px">
          Toto akci nelze vrÃ¡tit. Potvrdil ji zadÃ¡nÃ­m poslednÃ­ch dvou pÃ­smen
          nÃ¡zev:
        </p>
        <p
          style="
            color: var(--yellow);
            font-weight: 600;
            font-size: 13px;
            margin-bottom: 4px;
          "
          id="deleteRepoNameShow"
        ></p>
        <p style="color: var(--text-dim); font-size: 11px; margin-bottom: 10px">
          ğŸ‘‰ DoplÅˆ poslednÃ­ dvÄ› pÃ­smena:
          <strong
            style="color: var(--accent); font-size: 13px"
            id="deleteHintLetters"
          ></strong>
        </p>
        <label>PoslednÃ­ dvÄ› pÃ­smena nÃ¡zev</label>
        <input
          type="text"
          id="deleteRepoConfirm"
          placeholder="Npr. ak"
          maxlength="2"
        />
        <div class="modal-btns">
          <button class="btn-cancel" id="cancelDeleteRepo">ZruÅ¡it</button>
          <button class="btn-danger" id="confirmDeleteRepo" disabled>
            Smazat
          </button>
        </div>
      </div>
    </div>

    <!-- BACKUP PROGRESS MODAL -->
    <div class="modal-overlay" id="backupModal" style="display: none">
      <div class="modal" style="width: 440px">
        <h3>ğŸ’¾ Backup vÅ¡ech repozitÃ¡Å™Å¯</h3>
        <p style="color: var(--text-dim); font-size: 12px; margin-bottom: 16px">
          Stahuje se obsah vÅ¡ech repo a balÃ­ do ZIP...
        </p>
        <div
          id="backupRepoList"
          style="max-height: 200px; overflow-y: auto; margin-bottom: 14px"
        ></div>
        <!-- progress bar -->
        <div
          style="
            background: var(--bg);
            border-radius: 4px;
            height: 6px;
            overflow: hidden;
            margin-bottom: 8px;
          "
        >
          <div
            id="backupProgressBar"
            style="
              height: 100%;
              width: 0%;
              background: var(--accent);
              transition: width 0.3s;
              border-radius: 4px;
            "
          ></div>
        </div>
        <div
          style="
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: var(--text-dim);
          "
        >
          <span id="backupStatus">ÄŒekÃ¡ na zaÄÃ¡tek...</span>
          <span id="backupPercent">0%</span>
        </div>
        <div class="modal-btns" style="margin-top: 18px">
          <button class="btn-cancel" id="cancelBackup">ZruÅ¡it</button>
        </div>
      </div>
    </div>

    <!-- FILE CONTEXT MENU MODAL -->
    <div class="modal-overlay" id="ctxModal" style="display: none">
      <div class="modal" style="width: 380px">
        <div
          style="
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 16px;
          "
        >
          <span id="ctxFileIcon" style="font-size: 24px">ğŸ“„</span>
          <div>
            <div
              style="color: #fff; font-weight: 600; font-size: 14px"
              id="ctxFileName"
            ></div>
            <div style="color: #9a9da6; font-size: 11px" id="ctxFileMeta"></div>
          </div>
        </div>
        <div class="ctx-actions" id="ctxActions"></div>
        <!-- rename input (hidden by default) -->
        <div class="rename-row" id="renameRow">
          <input type="text" id="renameInput" placeholder="NovÃ½ nÃ¡zev..." />
          <div class="rename-btns">
            <button class="btn-confirm" id="confirmRename" style="flex: 1">
              PÅ™ejmenovat
            </button>
            <button class="btn-cancel" id="cancelRename">ZruÅ¡it</button>
          </div>
        </div>
      </div>
    </div>

    <!-- REPO CONTEXT MENU MODAL -->
    <div class="modal-overlay" id="repoCtxModal" style="display: none">
      <div class="modal" style="width: 380px">
        <div
          style="
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 16px;
          "
        >
          <span style="font-size: 24px">ğŸ“</span>
          <div>
            <div
              style="color: #fff; font-weight: 600; font-size: 14px"
              id="repoCtxName"
            ></div>
            <div style="color: #9a9da6; font-size: 11px" id="repoCtxMeta"></div>
          </div>
        </div>
        <div class="ctx-actions">
          <button class="ctx-btn" id="repoCtxRename">
            <span class="ctx-icon">âœï¸</span>
            <div>
              <div class="ctx-label">PÅ™ejmenovat</div>
              <div class="ctx-desc">ZmÄ›Åˆ nÃ¡zev repozitÃ¡Å™e</div>
            </div>
          </button>
          <button class="ctx-btn danger" id="repoCtxDelete">
            <span class="ctx-icon">ğŸ—‘ï¸</span>
            <div>
              <div class="ctx-label" style="color: var(--red)">Smazat</div>
              <div class="ctx-desc">NavÅ¾dy smaÅ¾e repozitÃ¡Å™</div>
            </div>
          </button>
        </div>
      </div>
    </div>

    <!-- EDIT DESCRIPTION MODAL -->
    <div class="modal-overlay" id="editDescModal" style="display: none">
      <div class="modal">
        <h3>ğŸ“ Upravit popis</h3>
        <label>Popis repozitÃ¡Å™e</label>
        <textarea
          id="editDescInput"
          placeholder="KrÃ¡tkÃ½ popis projektu..."
          style="min-height: 80px"
        ></textarea>
        <div class="modal-btns">
          <button class="btn-cancel" id="cancelEditDesc">ZruÅ¡it</button>
          <button class="btn-confirm" id="confirmEditDesc">UloÅ¾it</button>
        </div>
      </div>
    </div>

    <!-- FILE VIEWER MODAL -->
    <div class="modal-overlay" id="fileViewerModal" style="display: none">
      <div class="modal file-viewer">
        <div class="file-viewer-header">
          <div style="display: flex; align-items: center; gap: 10px">
            <span id="viewerFileIcon" style="font-size: 24px">ğŸ“„</span>
            <div>
              <div
                style="color: #fff; font-weight: 600; font-size: 14px"
                id="viewerFileName"
              ></div>
              <div
                style="color: #9a9da6; font-size: 11px"
                id="viewerFileMeta"
              ></div>
            </div>
          </div>
          <button class="btn-cancel" id="closeFileViewer">ZavÅ™Ã­t</button>
        </div>
        <div
          style="
            padding: 12px;
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
          "
        >
          <input
            type="text"
            id="searchInput"
            placeholder="NajÃ­t text..."
            style="
              flex: 1;
              min-width: 200px;
              padding: 8px 12px;
              background: var(--bg);
              border: 1px solid var(--border);
              border-radius: 6px;
              color: var(--text);
              font-size: 12px;
              font-family: var(--font-mono);
            "
          />
          <button
            class="btn-icon"
            id="findPrevBtn"
            title="PÅ™edchozÃ­ vÃ½skyt"
            style="padding: 8px 12px"
          >
            â–²
          </button>
          <button
            class="btn-icon"
            id="findNextBtn"
            title="DalÅ¡Ã­ vÃ½skyt"
            style="padding: 8px 12px"
          >
            â–¼
          </button>
          <button
            class="btn-icon"
            id="toggleReplaceBtn"
            title="Zobrazit nahrazenÃ­"
            style="padding: 8px 12px"
          >
            ğŸ”„
          </button>
          <div
            id="replaceControls"
            style="
              display: none;
              flex: 1 1 100%;
              gap: 8px;
              margin-top: 4px;
              display: flex;
            "
          >
            <input
              type="text"
              id="replaceInput"
              placeholder="Nahradit za..."
              style="
                flex: 1;
                min-width: 200px;
                padding: 8px 12px;
                background: var(--bg);
                border: 1px solid var(--border);
                border-radius: 6px;
                color: var(--text);
                font-size: 12px;
                font-family: var(--font-mono);
              "
            />
            <button
              class="btn-confirm"
              id="replaceBtn"
              style="padding: 8px 16px; font-size: 12px"
            >
              Nahradit
            </button>
            <button
              class="btn-confirm"
              id="replaceAllBtn"
              style="padding: 8px 16px; font-size: 12px"
            >
              Nahradit vÅ¡e
            </button>
          </div>
          <span
            id="searchCounter"
            style="
              color: var(--text-dim);
              font-size: 11px;
              padding: 8px 12px;
              white-space: nowrap;
            "
          ></span>
        </div>
        <div class="file-viewer-content">
          <pre
            id="fileViewerContent"
            contenteditable="true"
            spellcheck="false"
            style="outline: none"
          ></pre>
          <div
            id="imageViewerContainer"
            style="display: none; padding: 20px; text-align: center"
          >
            <img
              id="imageViewer"
              style="max-width: 100%; max-height: 600px; border-radius: 8px"
            />
          </div>
          <div
            id="markdownViewerContainer"
            style="display: none; padding: 20px"
          >
            <div
              id="markdownViewer"
              style="color: var(--text); line-height: 1.6"
            ></div>
          </div>
        </div>
        <div class="file-viewer-actions">
          <button
            class="btn-confirm"
            id="saveFileBtn"
            style="flex: 1; display: none"
          >
            ğŸ’¾ UloÅ¾it zmÄ›ny
          </button>
          <button class="btn-confirm" id="downloadFromViewer" style="flex: 1">
            â¬‡ï¸ StÃ¡hnout soubor
          </button>
        </div>
      </div>
    </div>

    <!-- NEW FILE/FOLDER MODAL -->
    <div class="modal-overlay" id="newFileModal" style="display: none">
      <div class="modal">
        <h3>âœ¨ VytvoÅ™it novÃ½...</h3>
        <label>Typ</label>
        <select id="newItemType">
          <option value="file">ğŸ“„ Soubor</option>
          <option value="folder">ğŸ“ SloÅ¾ka</option>
        </select>
        <label>NÃ¡zev</label>
        <input
          type="text"
          id="newItemName"
          placeholder="nazev.txt nebo slozka/"
        />
        <div id="fileContentSection">
          <label>Obsah (volitelnÃ©)</label>
          <textarea
            id="newFileContent"
            placeholder="Obsah novÃ©ho souboru..."
            rows="8"
          ></textarea>
        </div>
        <div class="modal-btns">
          <button class="btn-cancel" id="cancelNewItem">ZruÅ¡it</button>
          <button class="btn-confirm" id="confirmNewItem">VytvoÅ™it</button>
        </div>
      </div>
    </div>

    <!-- GITHUB SEARCH MODAL -->
    <div class="modal-overlay" id="searchModal" style="display: none">
      <div class="modal search-modal">
        <h3>ğŸ” Prohledat GitHub</h3>

        <!-- Search type tabs -->
        <div class="search-type-tabs">
          <button class="search-type-tab" data-type="repositories">ğŸ“ Repo</button>
          <button class="search-type-tab active" data-type="code">ğŸ’» KÃ³d</button>
          <button class="search-type-tab" data-type="users">ğŸ‘¤ UÅ¾ivatelÃ©</button>
          <button class="search-type-tab" data-type="issues">ğŸ“‹ Issues</button>
        </div>

        <!-- Search input -->
        <div class="search-header">
          <input type="text" id="searchQueryInput" placeholder="Hledat..." />
          <button class="btn-confirm" id="executeSearchBtn">ğŸ”</button>
        </div>

        <!-- Language help button -->
        <button class="btn-secondary lang-help-btn" onclick="openLanguageHelpModal()">â“ NÃ¡povÄ›da k jazykÅ¯m</button>

        <!-- Collapsible filters -->
        <button class="search-filters-toggle" id="filtersToggle" onclick="toggleSearchFilters()">
          <span>âš™ï¸ Filtry</span>
          <span class="arrow">â–¼</span>
        </button>
        <div class="search-filters" id="searchFilters">
          <!-- Filters will be rendered dynamically -->
        </div>

        <!-- Results -->
        <div class="search-stats" id="searchStats"></div>
        <div class="search-results" id="searchResults">
          <div class="search-empty">
            <div class="icon">ğŸ”</div>
            <p>Zadej hledanÃ½ vÃ½raz<br><small>PÅ™ednastaveno: HTML kÃ³d</small></p>
          </div>
        </div>

        <!-- Pagination -->
        <div class="search-pagination" id="searchPagination" style="display: none;">
          <button id="searchPrevPage" disabled>â†</button>
          <span id="searchPageInfo">1/1</span>
          <button id="searchNextPage">â†’</button>
        </div>

        <div class="modal-btns" style="margin-top: 12px;">
          <button class="btn-cancel" id="closeSearchModal">ZavÅ™Ã­t</button>
        </div>
      </div>
    </div>

    <!-- LANGUAGE HELP MODAL -->
    <div class="modal-overlay" id="languageHelpModal" style="display: none">
      <div class="modal language-help-modal">
        <div class="lang-help-header">
          <h3>ğŸ“š NÃ¡povÄ›da k programovacÃ­m jazykÅ¯m</h3>
          <button class="btn-icon" onclick="closeLanguageHelpModal()">âœ•</button>
        </div>
        <p class="lang-help-subtitle">Vyber jazyk pro detailnÃ­ informace o tom, jak ho pouÅ¾Ã­vat a spustit</p>
        <div class="lang-help-content" id="languageHelpContent">
          <!-- Content rendered by JS -->
        </div>
      </div>
    </div>

    <!-- TOAST -->
    <div class="toast" id="toast">
      <div class="toast-title" id="toastTitle"></div>
      <div id="toastMsg"></div>
    </div>

    <!-- DRAG & DROP OVERLAY -->
    <div class="drag-drop-overlay" id="dragDropOverlay">
      <div class="drag-drop-message">
        <div class="icon">ğŸ“¤</div>
        <div class="title">PÅ™etÃ¡hni soubory nebo sloÅ¾ky</div>
        <div class="desc">Pustit pro nahrÃ¡nÃ­ do repozitÃ¡Å™e</div>
      </div>
    </div>

    <script src="js/app.js"></script>
  </body>
</html>
